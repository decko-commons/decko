// autocomplete.js.coffee
(function(){decko.slotReady(function(e){return e.find("._autocomplete").each(function(){return decko.initAutoCardPlete($(this))}),e.find("._select2autocomplete").each(function(){return decko.initSelect2Autocomplete($(this),"complete")})}),$.extend(decko,{initSelect2Autocomplete:function(e,t,n,o,l,a){var u;return null==n&&(n=decko.autocompletePrepareItems),null==o&&(o=decko.autocompleteTemplateResult),null==l&&(l=decko.autocompleteTemplateSelection),null==a&&(a={}),u={placeholder:e.attr("placeholder"),escapeMarkup:function(e){return e},minimumInputLength:0,maximumSelectionSize:1,ajax:{delay:200,url:decko.path(":search.json"),data:function(e){return{query:{keyword:e.term},view:t}},processResults:function(e){return{results:n(e)}},cache:!0},templateResult:o,templateSelection:l,multiple:!1,width:"100%!important"},$.extend(u,a),e.select2(u)},autocompleteTemplateResult:function(e){return e.loading?e.text:'<span class="navbox-item-value ml-1">'+e.text+"</span>"},autocompleteTemplateSelection:function(e){return'<span class="navbox-item-value ml-1">'+e.text+"</span>"},autocompletePrepareItems:function(e){var n;return n=[],$.each(e.result,function(e,t){return n.push({id:t[0],text:t[0]})}),n},initAutoCardPlete:function(e){var t,n;if(t=e.data("options-card"))return n=t+".json?view=name_match",e.autocomplete({source:decko.slotPath(n)})}})}).call(this);