// mod.js.coffee
(function(){window.decko||(window.decko={}),$(window).ready(function(){var t;return $("body").on("click","._stop_propagation",function(t){return t.stopPropagation()}),$("body").on("click","._prevent_default",function(t){return t.preventDefault()}),$("body").on("mouseenter","a[data-hover-text]",function(){var t;return t=$(this).text(),$(this).data("original-text",t),$(this).text($(this).data("hover-text"))}),$("body").on("mouseleave","a[data-hover-text]",function(){return $(this).text($(this).data("original-text"))}),$("body").on("click",".shade-view h1",function(){var t;if(t=$(this).slot().find(".shade-content").is(":hidden"),decko.toggleShade($(this).closest(".pointer-list").find(".shade-content:visible").parent()),t)return decko.toggleShade($(this).slot())}),(t=$(".shade-view h1")[0])&&$(t).trigger("click"),$("body").on("click",".open-slow-items",function(){var t;return(t=$(this).closest(".panel-group")).find(".open-slow-items").removeClass("open-slow-items").addClass("close-slow-items"),t.find(".toggle-fast-items").text("show < 100ms"),t.find(".duration-ok").hide(),t.find(".panel-danger > .panel-collapse").collapse("show").find("a > span").addClass("show-fast-items")}),$("body").on("click",".close-slow-items",function(){var t;return(t=$(this).closest(".panel-group")).find(".close-slow-items").removeClass("close-slow-items").addClass("open-slow-items"),t.find(".toggle-fast-items").text("hide < 100ms"),t.find(".panel-danger > .panel-collapse").collapse("hide").removeClass("show-fast-items"),t.find(".duration-ok").show()}),$("body").on("click",".toggle-fast-items",function(){var t;return t=$(this).closest(".panel-group"),"hide < 100ms"===$(this).text()?(t.find(".duration-ok").hide(),$(this).text("show < 100ms")):(t.find(".duration-ok").show(),$(this).text("hide < 100ms"))}),$("body").on("click",".show-fast-items",function(t){var e;return $(this).removeClass("show-fast-items"),(e=$(this).closest(".panel-group")).find(".duration-ok").show(),e.find(".show-fast-items").removeClass("show-fast-items"),e.find(".panel-collapse").collapse("show"),t.stopPropagation()})}),$.extend(decko,{toggleShade:function(t){return t.find(".shade-content").slideToggle(1e3),t.find(".glyphicon").toggleClass("glyphicon-triangle-right glpyphicon-triangle-bottom")}})}).call(this);
// editor.js.coffee
(function(){$.extend(decko,{initializeEditors:function(e,t){return null==t&&(t=decko.editorInitFunctionMap),$.each(t,function(t,n){return $.each(e.find(t),function(){return n.call($(this))})})},editorContentFunctionMap:{},editorInitFunctionMap:{textarea:function(){return $(this).autosize()},".file-upload":function(){return decko.upload_file(this)},".etherpad-textarea":function(){return $(this).closest("form").find(".edit-submit-button").attr("class","etherpad-submit-button")}},addEditor:function(t,n,e){return decko.editorContentFunctionMap[t]=e,decko.editorInitFunctionMap[t]=n}}),jQuery.fn.extend({setContentFieldsFromMap:function(t){var e;return null==t&&(t=decko.editorContentFunctionMap),e=$(this),$.each(t,function(t,n){return e.setContentFields(t,n)})},setContentFields:function(t,n){return $.each(this.find(t),function(){return $(this).setContentField(n)})},setContentField:function(t){var n,e,i;if(e=(n=this.closest(".card-editor").find(".d0-card-content")).val(),i=t.call(this),n.val(i),e!==i)return n.change()}}),$(window).ready(function(){return setTimeout(function(){return decko.initializeEditors($("body > :not(.modal)"))},10),$("body").on("submit",".card-form",function(){return $(this).setContentFieldsFromMap(),$(this).find(".d0-card-content").attr("no-autosave","true"),!0})}),setInterval(function(){return $(".card-form").setContentFieldsFromMap()},2e4)}).call(this);
// name_editor.js.coffee
(function(){var r,a,t;a=null,$(window).ready(function(){return $("body").on("click","._renamer-updater",function(){return $(this).closest("form").find("#card_update_referers").val("true")}),$("body").on("submit","._rename-form",function(){var n,e;if((n=(e=$(this)).find(".alert")).is(":hidden"))return t(e),n.show("blind"),!1}),$("body").on("keyup",".name-editor input",function(n){var e;return a&&clearTimeout(a),e=$(this),13===n.which?(r(e),a=null):a=setTimeout(function(){return r(e),a=null},400)})}),t=function(n){var e,r;if(0<(r=n.find("._rename-reference-confirm")).data("referer-count"))return r.show(),(e=n.find("._renamer-updater")).show(),e.focus()},r=function(s){var l;return l=s.val(),decko.pingName(l,function(n){var e,r,a,t,i,u,o;return s.val()!==l?null:(o=n.status)?(e=s.parent(),(t=(a=s.closest("fieldset").find("legend")).find(".name-messages"))[0]||(t=$('<span class="name-messages"></span>'),a.append(null!=t)),e.removeClass("real-name virtual-name known-name"),u=s.slot().data("cardId"),"unknown"===o||u&&parseInt(u)===n.id?t.html(""):(e.addClass(o+"-name known-name"),i="virtual"===o?"in virtual":"already in",r=decko.path(n.url_key),t.html("\"<a href='"+r+"'>"+l+'</a>" '+i+" use"))):void 0})}}).call(this);
// autosave.js.coffee
(function(){jQuery.fn.extend({autosave:function(){var t,a,e,r,n;if(r=this.slot(),!this.attr("no-autosave")){if((e=this.closest(".form-group"))[0]){if(!(a=e.data("cardId")))return;": "+e.data("cardName")}else a=r.data("cardId"),"";if(a)return n=decko.path("update/~"+a),t=$("#edit_card_"+a).serializeArray().reduce(function(t,a){return t[a.name]=a.value,t},{draft:"true","success[view]":"blank"}),$.ajax(n,{data:t,type:"POST"})}}}),$(window).ready(function(){return $("body").on("change",".autosave .d0-card-content",function(){var t;return t=$(this),setTimeout(function(){return t.autosave()},500)})})}).call(this);
// doubleclick.js.coffee
(function(){var n,o,t,d;o={off:!1,on:!0,signed_in:decko.currentUserId},n=function(){return o[decko.doubleClick]},t=function(o){return![".nodblclick",".d0-card-header",".card-editor"].some(function(n){return o.closest(n)[0]})&&null==o.slot().find(".card-editor")[0]},d=function(n){var o,t,d,i;return d=n.slot(),(o=decko.slotEditLink(d))?o.click():(t=decko.slotEditView(d),i=decko.path("~"+d.data("cardId")+"?view="+t),d.reloadSlot(i))},$(window).ready(function(){if(n())return $("body").on("dblclick","div",function(){return t($(this))&&d($(this)),!1})})}).call(this);
// layout.js.coffee
(function(){var e,a,i,t,s,n,o;n=function(){var a;if(a=$("body > footer").first(),$("body > article, body > aside").wrapAll("<div class='"+e()+"'/>"),$("body > div > article, body > div > aside").wrapAll('<div class="row row-offcanvas">'),a)return $("body").append(a)},o=function(a,e){return"<div class='container'><div class='row "+e+"'>"+a+"</div></div>"},e=function(){return $("body").hasClass("fluid")?"container-fluid":"container"},s=function(a){return"<button class='offcanvas-toggle btn btn-secondary d-sm-none' data-toggle='offcanvas-"+a+"'><i class='material-icons'>chevron_"+("left"===a?"right":"left")+"</i></button>"},i=function(a){return"both"===a?o(s("left")+s("right"),"flex-row justify-content-between"):"left"===a?o(s("left"),"flex-row"):o(s("right"),"flex-row-reverse")},t=function(a){var e,t;return e=$("body > article").first(),t=$("body > aside").first(),e.addClass("col-xs-12 col-sm-9"),t.addClass("col-xs-6 col-sm-3 sidebar-offcanvas sidebar-offcanvas-"+a),"left"===a?$("body").append(t).append(e):$("body").append(e).append(t),n(),e.prepend(i(a))},a=function(){var a,e,t,s,o;return a=$("body > article").first(),e=$("body > aside").first(),t=$($("body > aside")[1]),a.addClass("col-xs-12 col-sm-6"),s="col-xs-6 col-sm-3 sidebar-offcanvas",e.addClass(s+" sidebar-offcanvas-left"),t.addClass(s+" sidebar-offcanvas-right"),$("body").append(e).append(a).append(t),n(),o=i("both"),a.prepend(o)},$.fn.extend({toggleText:function(a,e){return this.text(this.text()===e?a:e),this}}),$(window).ready(function(){switch(!1){case!$("body").hasClass("right-sidebar"):t("right");break;case!$("body").hasClass("left-sidebar"):t("left");break;case!$("body").hasClass("two-sidebar"):a()}return $('[data-toggle="offcanvas-left"]').click(function(){return $(".row-offcanvas").removeClass("right-active").toggleClass("left-active"),$(this).find("i.material-icons").toggleText("chevron_left","chevron_right")}),$('[data-toggle="offcanvas-right"]').click(function(){return $(".row-offcanvas").removeClass("left-active").toggleClass("right-active"),$(this).find("i.material-icons").toggleText("chevron_left","chevron_right")})})}).call(this);
// navbox.js.coffee
(function(){var t,a,i,n,r;$(window).ready(function(){var e;return(e=$("._navbox")).select2({placeholder:e.attr("placeholder"),escapeMarkup:function(e){return e},minimumInputLength:1,maximumSelectionSize:1,ajax:{delay:200,url:decko.path(":search.json"),data:function(e){return{query:{keyword:e.term},view:"complete"}},processResults:function(e){return{results:r(e)}},cache:!0},templateResult:t,templateSelection:a,multiple:!0,containerCssClass:"select2-navbox-autocomplete",dropdownCssClass:"select2-navbox-dropdown",width:"100%!important"}),e.on("select2:select",function(e){return n(e)})}),t=function(e){return e.loading?e.text:'<i class="material-icons">'+e.icon+'</i><span class="navbox-item-label">'+e.prefix+':</span> <span class="navbox-item-value">'+e.label+"</span>"},a=function(e){return e.icon?'<i class="material-icons">'+e.icon+'</i><span class="navbox-item-value">'+e.label+"</span>":e.text},r=function(n){var r,e;return r=[],e=n.term,n.search&&r.push(i({prefix:"search",id:e,text:e})),$.each(["add","new"],function(e,t){var a;if(a=n[t])return r.push(i({prefix:t,icon:"add",text:a[0],href:a[1]}))}),$.each(n["goto"],function(e,t){var a;return a=i({prefix:"go to",id:e,icon:"arrow_forward",text:t[0],href:t[1],label:t[2]}),r.push(a)}),r},i=function(e){return e.id||(e.id=e.prefix),e.icon||(e.icon=e.prefix),e.label||(e.label='<strong class="highlight">'+e.text+"</strong>"),e},n=function(e){var t;return(t=e.params.data).href?window.location=decko.path(t.href):$(e.target).closest("form").submit(),$(e.target).attr("disabled","disabled")}}).call(this);
// upload.js.coffee
(function(){$.extend(decko,{upload_file:function(e){var t;return $(e).on("fileuploadsubmit",function(e,t){var a,r,i;return r=(a=$(this)).siblings(".attachment_card_name:first").attr("name"),i=a.siblings("#attachment_type_id").val(),t.formData={"card[type_id]":i,attachment_upload:r}}),t=-1<$(e).closest("form").attr("action").indexOf("update")?"card/update/"+$(e).siblings("#file_card_name").val():"card/create",$(e).fileupload({url:decko.path(t),dataType:"html",done:decko.doneFile,add:decko.chooseFile,progressall:decko.progressallFile})},chooseFile:function(e,t){var a;return t.form.find("button[type=submit]").attr("disabled",!0),a=$(this).closest(".card-editor"),$("#progress").show(),a.append('<input type="hidden" class="extra_upload_param" value="true" name="attachment_upload">'),a.append('<input type="hidden" class="extra_upload_param" value="preview_editor" name="view">'),t.submit(),a.find(".choose-file").hide(),a.find(".extra_upload_param").remove()},progressallFile:function(e,t){var a;return a=parseInt(t.loaded/t.total*100,10),$("#progress .progress-bar").css("width",a+"%")},doneFile:function(e,t){return $(this).closest(".card-editor").find(".chosen-file").replaceWith(t.result),t.form.find("button[type=submit]").attr("disabled",!1)}}),$(window).ready(function(){return $("body").on("click",".cancel-upload",function(){var e;return(e=$(this).closest(".card-editor")).find(".choose-file").show(),e.find(".chosen-file").empty(),e.find(".progress").show(),e.find("#progress .progress-bar").css("width","0%"),e.find("#progress").hide()})})}).call(this);
// slot.js.coffee
(function(){$.extend(decko,{snakeCase:function(t){return t.replace(/([a-z])([A-Z])/g,function(t){return t[0]+"_"+t[1].toLowerCase()})},slotPath:function(t,o){var n;return n=decko.slotData(o),decko.path(t)+(t.match(/\?/)?"&":"?")+$.param(n)},slotData:function(t){var o,n,s;return s={},null!=(o=$("#main").children(".card-slot").data("cardName"))&&(s.main=o),t&&(t.isMain()&&(s.is_main=!0),null!=(n=t.data("slot"))&&(decko.slotParams(n,s,"slot"),n.type&&(s.type=n.type))),s},slotEditView:function(t){switch(decko.slotData(t)["slot[edit]"]){case"inline":return"edit_inline";case"full":return"bridge";default:return"edit"}},slotEditLink:function(n){var t;return!!(t=n.find(".edit-link").filter(function(t,o){return $(o).slot().data("slotId")===n.data("slotId")}))[0]&&$(t[0])},slotParams:function(t,s,e){return $.each(t,function(t,o){var n;return n=e+"["+decko.snakeCase(t)+"]","items"===t?decko.slotParams(o,s,n):s[n]=o})},contentLoaded:function(t,o){var n;return decko.initializeEditors(t),null!=(n=o.attr("notify-success"))&&t.notify(n,"success"),t.triggerSlotReady(o)},slotReady:function(n){return $("document").ready(function(){return $("body").on("slotReady",".card-slot",function(t,o){return t.stopPropagation(),null!=o?n.call(this,$(this),$(o)):n.call(this,$(this))})})},slotDestroy:function(o){return $("document").ready(function(){return $("body").on("slotDestroy",".card-slot, ._modal-slot",function(t){return t.stopPropagation(),o.call(this,$(this))})})}}),jQuery.fn.extend({slot:function(t,o){return null==t&&(t="success"),null==o&&(o="replace"),"modal"===o?this.modalSlot():this.selectSlot("slot-"+t+"-selector")||this.selectSlot("slot-selector")||this.closest(".card-slot")},selectSlot:function(t){var o,n;if(o=this.data(t))return(n=this.findSlot(o))&&n[0]&&n},isSlot:function(){return $(this).hasClass("card-slot")},isMain:function(){return this.slot().parent("#main")[0]},isMainOrMainModal:function(){var t;return(t=$(this)).closest(".modal")[0]&&(t=t.findOriginSlot("modal")),t.isMain()},findSlot:function(t){var o,n;if("modal-origin"===t)return this.findOriginSlot("modal");if("overlay-origin"===t)return this.findOriginSlot("overlay");for(n=this.closest(t),o=this.closest(".card-slot");0===n.length&&0<o.length;)n=$(o).find(t),o=$(o).parent().closest(".card-slot");return 0===n.length?$(t):n},findOriginSlot:function(t){var o,n;return n=this.closest("[data-"+t+"-origin-slot-id]").data(t+"-origin-slot-id"),null!=(o=$("[data-slot-id="+n+"]"))[0]?o:console.log("couldn't find origin with slot id "+n)},reloadSlot:function(t){var o;if(1<(o=$(this)).length)o.each(function(){return $(this).reloadSlot(t)});else if(o.isSlot||(o=o.slot()),o[0])return null==t&&(t=o.slotUrl()),o.addClass("slotter"),o.attr("href",t),o.data("url",t),this[0].href=t,o.data("remote",!0),$.rails.handleRemote(o)},clearSlot:function(){return this.triggerSlotDestroy(),this.empty()},slotUrl:function(){return decko.slotPath(this.slotMark()+"?view="+this.data("slot").view)},slotMark:function(){return this.data("cardId")?"~"+this.data("cardId"):this.data("cardName")},setSlotContent:function(t,o,n){var s;return"string"==typeof(s=$(t)[0]&&$(t)||t)?this.slot("success",o).replaceWith(s):(s.hasClass("_overlay")?o="overlay":s.hasClass("_modal")&&(o="modal"),this.slot("success",o).setSlotContentFromElement(s,o,n)),s},setSlotContentFromElement:function(t,o,n){var s;return"overlay"===o?this.addOverlay(t,n):t.hasClass("_modal-slot")||"modal"===o?t.showAsModal(n):((s=this.data("slot-id"))&&t.attr("data-slot-id",s),this.triggerSlotDestroy(),this.replaceWith(t),decko.contentLoaded(t,n))},triggerSlotReady:function(t){return this.isSlot()&&this.trigger("slotReady",t),this.find(".card-slot").trigger("slotReady",t)},triggerSlotDestroy:function(){return this.trigger("slotDestroy")}})}).call(this);
// decko.js.coffee
(function(){var e;$.extend(decko,{path:function(t){return t.match(/^\/|:\/\//)?t:decko.rootUrl+t},pingName:function(t,e){return $.getJSON(decko.path(""),{format:"json",view:"status","card[name]":t},e)}}),jQuery.fn.extend({notify:function(t,e){var r,n,o;return(n=(o=this.slot(e)).find(".card-notice"))[0]||(n=$('<div class="card-notice"></div>'),(r=o.find(".card-form"))[0]?$(r[0]).append(n):o.append(n)),n.html(t),n.show("blind")},report:function(t){var e;return!!(e=this.slot().find(".card-report"))[0]&&(e.hide(),e.html(t),e.show("drop",750),setTimeout(function(){return e.hide("drop",750)},3e3))}}),$(window).ready(function(){return $.ajaxSetup({cache:!1}),$("body").on("click",".submitter",function(){return $(this).closest("form").submit()}),$("body").on("click","button.redirecter",function(){return window.location=$(this).attr("href")}),$("body").on("change",".live-type-field",function(){var t;return t=$(this),e(t),t.data("params",$(this).closest("form").serialize()),t.data("url",$(this).attr("href"))}),$("body").on("change",".edit-type-field",function(){return $(this).closest("form").submit()}),$("body").on("mouseenter","[hover_content]",function(){return $(this).attr("hover_restore",$(this).html()),$(this).html($(this).attr("hover_content"))}),$("body").on("mouseleave","[hover_content]",function(){return $(this).html($(this).attr("hover_restore"))}),$("body").on("click",".render-error-link",function(t){return $(this).closest(".render-error").find(".render-error-message").show(),t.preventDefault()})}),decko.slotReady(function(t){return t.find("card-view-placeholder").each(function(){var e;if(!(e=$(this)).data("loading"))return e.data("loading",!0),$.get(e.data("url"),function(t){return e.replaceWith(t)})})}),e=function(t,e){var r;if(null==e&&(e=null),(r=t.closest(".slotter")).length&&r.attr("data-slotter-mode"))return r.attr("data-original-slotter-mode",r.attr("slotter-mode")),r.attr("data-slotter-mode",e)}}).call(this);
// modal.js.coffee
(function(){var a,o;$(window).ready(function(){return $("body").on("hidden.bs.modal",function(){return decko.removeModal()}),$("body").on("show.bs.modal","._modal-slot",function(o){var d;return d=$(o.relatedTarget),a($(this),d),$(this).modal("handleUpdate"),decko.contentLoaded($(o.target),d)}),$("._modal-slot").each(function(){return o($(this)),a($(this))}),$("body").on("click",".submit-modal",function(){return $(this).closest(".modal-content").find("form").submit()})}),o=function(o){var d;if(0<(d=o.find(".modal-content")).length&&0<d.html().length)return $("#main > .card-slot").registerAsOrigin("modal",o),o.modal("show")},a=function(o,d){var a,l;if(l=o.find(".modal-dialog"),null!=(a=null!=d?d.data("modal-class"):o.data("modal-class"))&&null!=l)return l.addClass(a)},jQuery.fn.extend({showAsModal:function(o){var d;return null!=o&&(d=this.modalify(o)),$("body > ._modal-slot").is(":visible")?this.addModal(d,o):($("body > ._modal-slot")[0]?($("._modal-slot").trigger("slotDestroy"),$("body > ._modal-slot").replaceWith(d)):$("body").append(d),o.registerAsOrigin("modal",d),d.modal("show",o))},addModal:function(o,d){var a;return"modal-replace"===d.data("slotter-mode")?(a=o.find(".modal-dialog"),o.adoptModalOrigin(),$("._modal-slot").trigger("slotDestroy"),$("body > ._modal-slot > .modal-dialog").replaceWith(a),decko.contentLoaded(a,d)):(decko.pushModal(o),d.registerAsOrigin("modal",o),o.modal("show",d))},adoptModalOrigin:function(){var o;return o=$("body > ._modal-slot .card-slot[data-modal-origin-slot-id]").data("modal-origin-slot-id"),this.find(".modal-body .card-slot").attr("data-modal-origin-slot-id",o)},modalOriginSlot:function(){},modalSlot:function(){var o;return 0<(o=$("#modal-container")).length?o:decko.createModalSlot()},modalify:function(o){var d;return null!=o.data("modal-body")&&this.find(".modal-body").append(o.data("modal-body")),this.hasClass("_modal-slot")?this:((d=$("<div/>",{id:"modal-container","class":"modal fade _modal-slot"})).append($("<div/>",{"class":"modal-dialog"}).append($("<div/>",{"class":"modal-content"}).append(this))),d)}}),$.extend(decko,{createModalSlot:function(){var o;return o=$("<div/>",{id:"modal-container","class":"modal fade _modal-slot"}),$("body").append(o),o},removeModal:function(){return $("._modal-stack")[0]?decko.popModal():($("._modal-slot").trigger("slotDestroy"),$(".modal-dialog").empty())},pushModal:function(o){var d;return(d=$("body > ._modal-slot")).removeAttr("id"),d.removeClass("_modal-slot").addClass("_modal-stack").removeClass("modal").addClass("background-modal"),o.insertBefore(d),$(".modal-backdrop").removeClass("show")},popModal:function(){return $(".modal-backdrop").addClass("show"),$("body > ._modal-slot").trigger("slotDestroy"),$("body > ._modal-slot").remove(),$($("._modal-stack")[0]).addClass("_modal-slot").removeClass("_modal-stack").attr("id","modal-container").addClass("modal").removeClass("background-modal"),$(document.body).addClass("modal-open")}})}).call(this);
// overlay.js.coffee
(function(){jQuery.fn.extend({overlaySlot:function(){var e;return null!=(e=this.closest(".card-slot._overlay"))[0]?e:null!=(e=this.closest(".overlay-container").find("._overlay"))[0]&&$(e[0])},addOverlay:function(e,r){return this.parent().hasClass("overlay-container")?$(e).hasClass("_stack-overlay")?this.before(e):($("._overlay-origin").removeClass("_overlay-origin"),this.replaceOverlay(e)):(this.parent().hasClass("_overlay-container-placeholder")?this.parent().addClass("overlay-container"):this.wrapAll('<div class="overlay-container">'),this.addClass("_bottomlay-slot"),this.before(e)),r.registerAsOrigin("overlay",e),decko.contentLoaded(e,r)},replaceOverlay:function(e){return this.overlaySlot().trigger("slotDestroy"),this.overlaySlot().replaceWith(e),$(".bridge-sidebar .tab-pane:not(.active) .bridge-pills > .nav-item > .nav-link.active").removeClass("active")},isInOverlay:function(){return this.closest(".card-slot._overlay").length},removeOverlay:function(){var e;if(e=this.overlaySlot())return e.removeOverlaySlot()},removeOverlaySlot:function(){var e;return this.trigger("slotDestroy"),1===this.siblings().length&&(e=$(this.siblings()[0])).hasClass("_bottomlay-slot")&&(e.parent().hasClass("_overlay-container-placeholder")?e.parent().removeClass("overlay-container"):e.unwrap(),e.removeClass("_bottomlay-slot").updateBridge(!0,e)),this.remove()}})}).call(this);
// recaptcha.js.coffee
(function(){jQuery.fn.extend({updateRecaptchaToken:function(a){var e,n;return null==(n=this.find("input._recaptcha-token"))[0]?n.val("recaptcha-token-field-missing"):"undefined"==typeof grecaptcha||null===grecaptcha?n.val("grecaptcha-undefined"):(e=$(this),a&&a.stopPropagation(),grecaptcha.execute(n.data("site-key"),{action:n.data("action")}).then(function(t){if(n.val(t),n.addClass("_token-updated"),a)return e.submit()}),!1)}})}).call(this);
// slotter.js.coffee
(function(){$(window).ready(function(){return $("body").on("ajax:success",".slotter",function(t,e){return $(this).slotterSuccess(t,e)}),$("body").on("ajax:error",".slotter",function(t,e){return $(this).showErrorResponse(e.status,e.responseText)}),$("body").on("click","button.slotter",function(){return!!$.rails.allowAction($(this))&&$.rails.handleRemote($(this))}),$("body").on("click","._clickable.slotter",function(){return $(this)[0].href=$(this).attr("href"),$.rails.handleRemote($(this))}),$("body").on("click",'[data-dismiss="overlay"]',function(){return $(this).findSlot(".card-slot._overlay").removeOverlay()}),$("body").on("click","._close-overlay-on-success",function(){return $(this).closeOnSuccess("overlay")}),$("body").on("click","._close-modal-on-success",function(){return $(this).closeOnSuccess("modal")}),$("body").on("click","._close-on-success",function(){return $(this).closeOnSuccess()}),$("body").on("click","._update-origin",function(){return $(this).closest(".slotter").data("slotter-mode","update-origin")}),$("body").on("submit","form.slotter",function(t){var e;if((e=$(this)).data("main-success")&&e.isMainOrMainModal()&&e.mainSuccess(),"on"===e.data("recaptcha"))return e.handleRecaptchaBeforeSubmit(t)}),$("body").on("ajax:beforeSend",".slotter",function(t,e,s){return $(this).slotterBeforeSend(s)})}),jQuery.fn.extend({mainSuccess:function(){var i;return i=$(this),$.each(i.data("main-success"),function(t,e){var s,o;return o="[name=success\\["+t+"\\]]",(s=i.find(o))[0]||(s=$('<input type="hidden" name="success['+t+']"/>'),i.append(s)),s.val(e)})},slotterSuccess:function(t,e){var s,o,i,n;if(this.hasClass("slotter")){if(!t.slotSuccessful)return this.data("reload")&&window.location.reload(!0),this.data("update-modal-origin")&&this.updateModalOrigin(),this.data("update-origin")&&this.updateOrigin(),this.data("original-slotter-mode")&&this.attr("data-slotter-mode",this.data("original-slotter-mode")),o=this.data("slotter-mode"),this.showSuccessResponse(e,o),this.hasClass("_close-overlay")&&this.removeOverlay(),this.hasClass("_close-modal")&&this.closest(".modal").modal("hide"),this.hasClass("card-paging-link")&&(n=this.slot().offset().top,$("body").scrollTop(n)),this.data("update-foreign-slot")&&(s=this.findSlot(this.data("update-foreign-slot")),i=this.data("update-foreign-slot-url"),s.reloadSlot(i)),t.slotSuccessful=!0}else console.log("warning: slotterSuccess called on non-slotter element "+this)},showSuccessResponse:function(t,e){if("silent-success"!==e)return"update-modal-origin"===e?this.updateModalOrigin():"update-origin"===e?this.updateOrigin():t.redirect?window.location=t.redirect:t.reload?window.location.reload(!0):this.updateSlot(t,e)},showErrorResponse:function(t,e){return 403===t?$(e).showAsModal($(this)):900===t?$(e).showAsModal($(this)):(this.notify(e,"error"),409===t?this.slot().find(".current_revision_id").val(this.slot().find(".new-current-revision-id").text()):void 0)},updateModalOrigin:function(){return this.overlaySlot()?this.findOriginSlot("overlay").updateOrigin():this.closest("#modal-container")[0]?this.updateOrigin():void 0},updateOrigin:function(){var t,e;if(null!=(e=this.overlaySlot()?"overlay":this.closest("#modal-container")[0]?"modal":void 0))return(t=this.findOriginSlot(e))&&null!=t[0]?t.reloadSlot():void 0},registerAsOrigin:function(t,e){return e.hasClass("_modal-slot")&&(e=e.find(".modal-body .card-slot")),e.attr("data-"+t+"-origin-slot-id",this.closest(".card-slot").data("slot-id"))},updateSlot:function(t,e){return e||(e="replace"),this.setSlotContent(t,e,$(this))},closeOnSuccess:function(t){var e;return e=this.closest(".slotter"),null==t&&(t=this.isInOverlay()?"overlay":"modal"),e.addClass("_close-"+t)},slotterBeforeSend:function(t){var e;if(!t.skip_before_send)return t.url.match(/home_view/)||"modal"===this.data("slotter-mode")||(t.url=decko.slotPath(t.url,this.slot())),this.is("form")&&(e=this.data("file-data"))?(this.uploadWithBlueimp(e,t),!1):void 0},uploadWithBlueimp:function(t,e){var s,o,i,n;return(i=this.find(".file-upload"))[1]?(this.notify("Decko does not yet support multiple files in a single form.","error"),!1):((n=i.data("blueimpFileupload"))._isXHRUpload(n.options)||(this.find("[name=success]").val("_self"),e.url+="&simulate_xhr=true",o=function(t){return t.find("body").html()},e.dataFilter=o),(s=$.extend(e,n._getAJAXSettings(t),{url:e.url})).skip_before_send=!0,$.ajax(s))},handleRecaptchaBeforeSubmit:function(t){var e;return null==(e=this.find("input._recaptcha-token"))[0]?e.val("recaptcha-token-field-missing"):e.hasClass("_token-updated")?e.removeClass("_token-updated"):"undefined"==typeof grecaptcha||null===grecaptcha?e.val("grecaptcha-undefined"):this.updateRecaptchaToken(t)}})}).call(this);
// bridge.js.coffee
(function(){decko.slotReady(function(e,t){var r;if(e.updateBridge(!1,t),1===(r=e.find("ul._auto-single-select > li.nav-item > a.nav-link")).length)return $(r[0]).click()}),jQuery.fn.extend({updateBridge:function(e,t){if(null==e&&(e=!1),0<this.closest(".bridge").length)return this.data("breadcrumb")?this.updateBreadcrumb():t&&$(t).data("breadcrumb")&&$(t).updateBreadcrumb(),e?$(".bridge-pills > .nav-item > .nav-link.active").removeClass("active"):void 0},updateBreadcrumb:function(){var e;return(e=$(".modal-header ._bridge-breadcrumb li:last-child")).text(this.data("breadcrumb")),e.attr("class","breadcrumb-item active "+this.data("breadcrumb-class"))}}),$(window).ready(function(){return $("body").on("select2:select","._close-rule-overlay-on-select",function(){return $(".overlay-container > ._overlay.card-slot.overlay_rule-view.RULE").removeOverlay()}),$("body").on("click","._update-history-pills",function(){return $(this).closest(".slotter").data("update-foreign-slot",".card-slot.history_tab-view")})})}).call(this);
// nest_editor.js.coffee
(function(){$(document).ready(function(){return $("body").on("click","button._nest-apply",function(){return null!=$(this).data("index")?nest.applyNestToNestListEditor($(this).data("index")):nest.applyNestToTinymceEditor($(this).data("tinymce-id"),$(this).data("tm-snippet-start"),$(this).data("tm-snippet-size"))}),$("body").on("click","button._change-create-to-update",function(){var t;return t=$(this).closest("form").find("#success_tinymce_id").val(),nest.changeCreateToUpdate(t)}),$("body").on("click","button._open-nest-editor",function(){var t,e,n,r;return r=(e=$(this).closest("._nest-form")).find("._reference").val(),n=e.find("._nest-options").val(),t=encodeURIComponent("{{"+r+"|"+n+"}}"),nest.openNestEditorForSlot($(this).closest(".card-slot"),$(this).closest(".slotter"),"index="+e.data("index")+"&tm_snippet_raw="+t)})}),window.nest||(window.nest={}),$.extend(nest,{openNestEditor:function(t,e){return null==e&&(e=nest.editParams(t)),this.openEditorForTm(t,e,"nest_editor","modal_nest_editor")},openNestEditorForSlot:function(t,e,n){var r;return r=t[0]?$(t[0]).attr("data-card-name"):":update",nest.request(r,"nest_editor","modal_nest_editor",e,n)},openEditorForTm:function(t,e,n,r){var o,a,s;return e+="&tinymce_id="+t.id,a=$("#"+t.id).closest(".card-slot"),s=$("#"+t.id),o=a[0]?$(a[0]).attr("data-card-name"):":update",nest.request(o,n,r,s,e)},openImageEditor:function(t){var e;return null==e&&(e=nest.editParams(t,"{{","}}",!1)),this.openEditorForTm(t,e,"nest_image","modal_nest_image")},changeCreateToUpdate:function(t){var e,n;return n=(e=$("#"+t).closest("form")).attr("action").replace("card/create","card/update"),e.attr("action",n)},insertNest:function(t,e){return t.insertContent(e)},request:function(t,e,n,r,o){var a,s,i;return(s=$(".bridge-sidebar > ._overlay-container-placeholder > .card-slot"))[0]?(i=e,a="overlay"):(s=$($(".card-slot")[0]),i=n,a="modal"),nest.sendRequest(r,s,a,t,i,o)},sendRequest:function(e,n,r,t,o,a){var s;return null==a&&(a=""),s="/"+t+"?view="+o+"&"+a,$.ajax({url:s,type:"GET",success:function(t){return n.setSlotContent(t,r,e)}})},editParams:function(t,e,n,r){var o,a,s,i,d,l,c,u,p;return null==e&&(e="{{"),null==n&&(n="}}"),null==r&&(r=!0),null==(u=t.selection.getSel())||null==u.anchorNode?nest.paramsStr(0):(p=u.anchorNode.data)?(c=u.anchorOffset,a=p.substr(0,c),o=p.substr(c),(s={before:{close:a.lastIndexOf(n),open:a.lastIndexOf(e)},after:{close:o.indexOf(n),open:o.indexOf(e)}}).before.open>s.before.close&&-1!==s.after.close&&(-1===s.after.open||s.after.close<s.after.open)?(l=s.before.open,null==i&&(d=s.after.close+c+2-l,i=p.substr(l,d)),r?nest.paramsStr(l,i):nest.paramsStr(l+d)):nest.paramsStr(c)):nest.paramsStr(u.anchorOffset)},paramsStr:function(t,e){var n;return n="",null!=t&&(n+="&tm_snippet_start="+t),null!=e&&0<e.length&&(n+="&tm_snippet_raw="+encodeURIComponent(e)),n},offsetAfterInsert:function(t,e){return t.selection.getSel().anchorOffset-e.lengthr},applyNestToTinymceEditor:function(t,e,n){return nest.applySnippet("nest",t,e,n)},applyNestToNestListEditor:function(t){var e;return(e=$("._nest-form[data-index='"+t+"']")).find("._reference").val(nest.name()),e.find("._nest-options").val(nest.options()),decko.updateAddItemButton(e)},applySnippet:function(t,e,n,r){var o,a,s;return o=$("._"+t+"-preview").val(),a=tinymce.get(e),null!=n?nest.replaceSnippet(a,n,r,o):(a.insertContent(o),s=nest.offsetAfterInsert(a,o),$("button._"+t+"-apply").attr("data-tm-snippet-start",s)),$("button._"+t+"-apply").attr("data-tm-snippet-size",o.length)},replaceSnippet:function(t,e,n,r){var o,a;return null!=(o=t.selection.getSel())&&null!=o.anchorNode&&null!=o.anchorNode.data?(null==n&&(n=0),a=""+(a=o.anchorNode.data).substr(0,e)+r+a.substr(e+n),o.anchorNode.data=a):t.insertContent(r)},updatePreview:function(t){var e;return null==t&&(t="{{"+nest.name()+"|"+nest.options()+"}}"),(e=$("._nest-preview")).val(t),e.data("nest-options",nest.options()),e.data("reference",nest.name())}})}).call(this);
// nest_editor_rules.js.coffee
(function(){}).call(this);
// nest_editor_options.js.coffee
(function(){$(document).ready(function(){return $("body").on("keyup","input._nest-option-value",function(){return nest.updatePreview()}),$("body").on("select2:select","._nest-option-name",function(){return nest.toggleOptionName($(this).closest("._options-select"),$(this).val(),!0),nest.updatePreview()}),$("body").on("select2:selecting","._nest-option-name",function(){return nest.toggleOptionName($(this).closest("._options-select"),$(this).val(),!1)}),$("body").on("select2:select","._nest-option-name._new-row",function(){var t,e;return $(this).closest(".input-group").find(".input-group-prepend").removeClass("d-none"),(t=$(this).closest("._nest-option-row")).find("._nest-option-value").removeAttr("disabled"),e=t.parent().find("._nest-option-row._template"),$(this).removeClass("_new-row"),nest.addRow(e)}),$("body").on("click","._configure-items-button",function(){return nest.addItemsOptions($(this))}),$("body").on("click","button._nest-delete-option",function(){return nest.removeRow($(this).closest("._nest-option-row"))})}),$.extend(nest,{showTemplate:function(t){return t.removeClass("_template")},addRow:function(t){var e,n;return(n=t.find("select")).select2("destroy"),n.removeAttr("data-select2-id"),e=t.clone(),decko.initSelect2(n),nest.showTemplate(t),t.after(e),decko.initSelect2(e.find("select"))},removeRow:function(t){var e;return e=t.find("._nest-option-name").val(),nest.toggleOptionName(t.closest("._options-select"),e,!1),t.remove(),nest.updatePreview()},addItemsOptions:function(t){var e,n,o;return n=(e=t.closest("._configure-items")).cloneSelect2(!0),o=t.text(),t.replaceWith($("<h6>"+o.substr(9)+"<h6>")),nest.showTemplate(e.find("._options-select._template")),n.find("._configure-items-button").text(o.replace("items","subitems")),e.after(n),nest.updatePreview()},options:function(){var t,e,n,o,s;for(o=[],e=0,n=(s=$("._options-select:not(._template")).length;e<n;e++)t=s[e],o.push(nest.extractOptions($(t)));return o.map(function(t){return nest.toNestSyntax(t)}).join("|")},extractOptions:function(t){var e,n,o,s,i;for(o={},e=0,n=(s=t.find("._nest-option-row:not(.template)")).length;e<n;e++)i=s[e],nest.addOption(o,$(i));return o},addOption:function(t,e){var n,o;if(null!=(o=e.find("._nest-option-value").val())&&0<o.length)return null!=t[n=e.find("._nest-option-name").val()]?t[n].push(o):t[n]=[o]},toggleOptionName:function(t,e,n){var o,s,i,r,l;if("show"===e||"hide"===e)return!0;for(r=[],o=0,s=(i=t.find("._nest-option-name")).length;o<s;o++)l=i[o],$(l).val()!==e&&$(l).find("option[value="+e+"]").attr("disabled",n),r.push(decko.initSelect2($(l)));return r},toNestSyntax:function(t){var e,n,o;for(e in n=[],t)o=t[e],n.push(e+": "+o.join(", "));return n.join("; ")}})}).call(this);
// nest_editor_name.js.coffee
(function(){var t;t=null,$(document).ready(function(){return $("body").on("click","._nest-field-toggle",function(){return $(this).is(":checked")?nest.addPlus():nest.removePlus()}),$("body").on("input","input._nest-name",function(e){if(nest.nameChanged(),13!==e.which)return t&&clearTimeout(t),t=setTimeout(function(){return nest.updateNameRelatedTabs()},700)}),$("body").on("keydown","input._nest-name",function(e){if(13===e.which)return t&&clearTimeout(t),nest.updateNameRelatedTabs()})}),$.extend(nest,{name:function(){return nest.evalFieldOption($("input._nest-name").val())},nameChanged:function(){var e;return e=$("._nest-preview").val().replace(/^\{\{[^}|]*/,"{{"+nest.name()),nest.updatePreview(e)},evalFieldOption:function(e){return nest.isField()?"+"+e:e},isField:function(){return $("._nest-field-toggle").is(":checked")},addPlus:function(){var e;return e=$("._nest-preview").val().replace(/^\{\{\+?/,"{{+"),nest.updatePreview(e),$(".input-group.hide-prefix").removeClass("hide-prefix").addClass("show-prefix")},removePlus:function(){var e;return e=$("._nest-preview").val().replace(/^\{\{\+?/,"{{"),nest.updatePreview(e),$(".input-group.show-prefix").removeClass("show-prefix").addClass("hide-prefix")},rulesTabSlot:function(){return $("._nest-editor .tab-pane-rules > .card-slot")},contentTabSlot:function(){return $("._nest-editor .tab-pane-content > .card-slot")},emptyNameAlert:function(e){return e?$("._empty-nest-name-alert").removeClass("d-none"):$("._empty-nest-name-alert:not(.d-none)").addClass("d-none")},updateNameRelatedTabs:function(){return nest.updateRulesTab(),nest.updateContentTab()},updateContentTab:function(){var e,t;if(0<(e=nest.contentTabSlot()).length)return t=decko.path(nest.fullName()+"?view=nest_content"),nest.updateNameDependentSlot(e,t)},updateRulesTab:function(){var e,t;return e=nest.rulesTabSlot(),t=decko.path(nest.setNameForRules()+"?view=nest_rules"),nest.updateNameDependentSlot(e,t)},updateNameDependentSlot:function(e,t){var n;return null!=(n=$("input._nest-name").val())&&0<n.length?(nest.emptyNameAlert(!1),e.reloadSlot(t)):(e.clearSlot(),nest.emptyNameAlert(!0))},fullName:function(){var e,t;return t=(e=$("input._nest-name")).val(),nest.isField()&&e.attr("data-left-name")?e.attr("data-left-name")+"+"+t:t},setNameForRules:function(){var e,t;return t=(e=$("input._nest-name")).val(),nest.isField()?e.attr("data-left-type")?e.attr("data-left-type")+"+"+t+"+*type plus right":t+"+*right":t+"+*self"}})}).call(this);
// link_editor.js.coffee
(function(){$(document).ready(function(){return $("body").on("click","button._link-apply",function(){return link.applyLink($(this).data("tinymce-id"),$(this).data("tm-snippet-start"),$(this).data("tm-snippet-size"))})}),window.link||(window.link={}),$(document).ready(function(){return $("body").on("click","._link-field-toggle",function(){return $(this).is(":checked")?link.addPlus():link.removePlus()}),$("body").on("input","input._link-target",function(){return link.targetChanged()}),$("body").on("input","input._link-title",function(){return link.titleChanged()})}),$.extend(link,{openLinkEditor:function(n){var i;return null==i&&(i=nest.editParams(n,"[[","]]")),nest.openEditorForTm(n,i,"link_editor","modal_link_editor")},applyLink:function(n,i,e){return nest.applySnippet("link",n,i,e)},target:function(){return link.evalFieldOption($("input._link-target").val())},title:function(){return $("input._link-title").val()},titleChanged:function(){var n;return n=$("._link-preview").val().replace(/^\[\[[^\]]*/,"[["+link.target()+"|"+link.title()),link.updatePreview(n)},targetChanged:function(){var n;return n=$("._link-preview").val().replace(/^\[\[[^\]|]*/,"[["+link.target()),link.updatePreview(n)},evalFieldOption:function(n){return link.isField()?"+"+n:n},isField:function(){return $("._link-field-toggle").is(":checked")},addPlus:function(){var n;return n=$("._link-preview").val().replace(/^\[\[\+?/,"[[+"),link.updatePreview(n),$(".input-group.hide-prefix").removeClass("hide-prefix").addClass("show-prefix")},removePlus:function(){var n;return n=$("._link-preview").val().replace(/^\[\[\+?/,"[["),link.updatePreview(n),$(".input-group.show-prefix").removeClass("show-prefix").addClass("hide-prefix")},updatePreview:function(n){return null==n&&(n="[["+link.target()+"|"+link.title()+"]]"),$("._link-preview").val(n)}})}).call(this);
// components.js.coffee
(function(){var e;e=null,$(window).ready(function(){return $("body").on("show.bs.tab",'a.load[data-toggle="tab"][data-url]',function(t){var e,n;return e=$(t.target).attr("href"),n=$(t.target).data("url"),$(t.target).removeClass("load"),$.ajax({url:n,type:"GET",success:function(t){return $(e).append(t),decko.contentLoaded($(e),$(this))}})}),$("body").on("input","._submit-after-typing",function(t){return $(t.target).closest("form").slot().find(".autosubmit-success-notification").remove(),e&&clearTimeout(e),e=setTimeout(function(){return $(t.target).closest("form").submit(),e=null},1e3)}),$("body").on("keydown","._submit-after-typing",function(t){if(13===t.which)return e&&clearTimeout(e),e=null,$(t.target).closest("form").submit(),!1}),$("body").on("change","._submit-on-change",function(t){return $(t.target).closest("form").submit(),!1}),$("body").on("change","._edit-item",function(t){var e;return(e=$(t.target)).is(":checked")?e.attr("name","add_item"):e.attr("name","drop_item"),$(t.target).closest("form").submit(),!1})})}).call(this);
// follow.js.coffee
(function(){$(window).ready(function(){return $("body").on("click",".btn-item",function(){return $(this).find("i").html("hourglass_full")}),$("body").on("mouseenter",".btn-item-delete",function(){return $(this).find("i").html("remove"),$(this).addClass("btn-danger").removeClass("btn-primary")}),$("body").on("mouseleave",".btn-item-delete",function(){return $(this).find("i").html("check"),$(this).addClass("btn-primary").removeClass("btn-danger")}),$("body").on("click",".follow-updater",function(){return $(this).closest("form").find("#card_update_all_users").val("true")}),$("body").on("submit",".edit-view.SELF-Xfollow_default .card-form",function(){var t;if((t=$(this).find(".confirm_update_all-view")).is(":hidden"))return $(this).find(".follow-updater").show(),t.show("blind"),!1})})}).call(this);
// card_menu.js.coffee
(function(){var o;decko.isTouchDevice=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||o()},o=function(o){return o=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))},decko.slotReady(function(o){if(decko.isTouchDevice())return o.find("._show-on-hover").removeClass("_show-on-hover")}),$(window).ready(function(){return $("body").on("show.bs.popover","._card-menu-popover",function(){return $(this).closest(".card-menu._show-on-hover").removeClass("_show-on-hover").addClass("_show-on-hover-disabled")}),$("body").on("hide.bs.popover","._card-menu-popover",function(){return $(this).closest(".card-menu._show-on-hover-disabled").removeClass("_show-on-hover-disabled").addClass("_show-on-hover")})})}).call(this);
// slot_ready.js.coffee
(function(){decko.slotReady(function(e){if(e.find("._disappear").delay(5e3).animate({height:0},1e3,function(){return $(this).hide()}),e.hasClass("_refresh-timer"))return setTimeout(function(){return e.reloadSlot(e.data("refresh-url"))},2e3)})}).call(this);
// filter.js.coffee
(function(){decko.filter=function(t){var i;return i=$(t).closest("._filter-widget"),this.widget=i.length?i:$(t).closest("._filtered-content").find("._filter-widget"),this.activeContainer=this.widget.find("._filter-container"),this.dropdown=this.widget.find("._add-filter-dropdown"),this.dropdownItems=this.widget.find("._filter-category-select"),this.form=this.widget.find("._filter-form"),this.quickFilter=this.widget.find("._quick-filter"),this.showWithStatus=function(i){var e;return e=this,$.each(this.dropdownItems,function(){var t;if((t=$(this)).data(i))return e.activate(t.data("category"))})},this.reset=function(){return this.dropdownItems.show(),this.restrict(this.form.find("._reset-filter").data("reset"))},this.clear=function(){return this.activeContainer.find(".input-group").remove()},this.activate=function(t,i){return this.activateField(t,i),this.hideOption(t)},this.showOption=function(t){return this.dropdown.show(),this.option(t).show()},this.hideOption=function(t){if(this.option(t).hide(),this.dropdownItems.length<=this.activeFields().length)return this.dropdown.hide()},this.activeFields=function(){return this.activeContainer.find("._filter-input")},this.option=function(t){return this.dropdownItems.filter("[data-category='"+t+"']")},this.findPrototype=function(t){return this.widget.find("._filter-input-field-prototypes ._filter-input-"+t)},this.activateField=function(t,i){var e;return e=this.findPrototype(t).clone(),this.fieldValue(e,i),this.dropdown.before(e),this.initField(e),e.find("input, select").first().focus()},this.fieldValue=function(t,i){return"object"==typeof i?this.compoundFieldValue(t,i):this.simpleFieldValue(t,i)},this.simpleFieldValue=function(t,i){var e;if(e=t.find("input, select"),void 0!==i)return e.val(i)},this.compoundFieldValue=function(t,i){var e,n,r;for(n in r=[],i)e=t.find("#filter_value_"+n),r.push(e.val(i[n]));return r},this.removeField=function(t){return this.activeField(t).remove(),this.showOption(t)},this.initField=function(t){return this.initSelectField(t),decko.initAutoCardPlete(t.find("input"))},this.initSelectField=function(t){return t.find("select").select2({containerCssClass:":all:",width:"auto",dropdownAutoWidth:"true"})},this.activeField=function(t){return this.activeContainer.find("._filter-input-"+t)},this.isActive=function(t){return this.activeField(t).length},this.restrict=function(t){var i;for(i in this.clear(),t)this.activateField(i,t[i]);return this.update()},this.addRestrictions=function(t){var i;for(i in t)this.removeField(i),this.activate(i,t[i]);return this.update()},this.removeRestrictions=function(t){var i;for(i in t)this.removeField(i);return this.update()},this.setInputVal=function(t,i){var e;return(e=t.find("select")).length?this.setSelect2Val(e,i):this.setTextInputVal(t.find("input"),i)},this.setSelect2Val=function(t,i){return t.attr("multiple")&&!Array.isArray(i)&&(i=[i]),t.select2("val",i)},this.setTextInputVal=function(t,i){return t.val(i),this.update()},this.updateLastVals=function(){return this.activeFields().find("input, select").each(function(){return $(this).data("lastVal",$(this).val())})},this.updateUrlBar=function(){if(!this.widget.closest("._noFilterUrlUpdates")[0])return window.history.pushState("filter","filter","?"+this.form.serialize())},this.update=function(){return this.updateLastVals(),this.updateQuickLinks(),this.form.submit(),this.updateUrlBar()},this.updateQuickLinks=function(){var t,r;return(t=(r=this).quickFilter.find("._filter-link")).addClass("active"),t.each(function(){var t,i,e,n;for(t in n=[],e=(i=$(this)).data("filter"))n.push(r.deactivateQuickLink(i,t,e[t]));return n})},this.deactivateQuickLink=function(i,t,e){var n;return n="._filter-input-"+t,$.map([this.form.find(n+" input, "+n+" select").val()],function(t){if(t=[t].flat(),-1<$.inArray(e,t))return i.removeClass("active")})},this.updateIfChanged=function(){if(this.changedSinceLastVal())return this.update()},this.updateIfPresent=function(t){var i;if((i=this.activeField(t).find("input, select").val())&&0<i.length)return this.update()},this.changedSinceLastVal=function(){var t;return t=!1,this.activeFields().find("input, select").each(function(){if($(this).val()!==$(this).data("lastVal"))return t=!0}),t},this}}).call(this);
// filter_links.js.coffee
(function(){decko.slotReady(function(e){return e.find("._filter-widget").each(function(){var t;if(e[0]===$(this).slot()[0])return(t=new decko.filter(this)).showWithStatus("active"),t.updateLastVals(),t.updateQuickLinks()})}),$(window).ready(function(){var r,i,a,e,t,n,o;return r=function(t){return new decko.filter(t)},o=function(t){return $(t).hasClass("select2-search__field")},i=function(t){var e;return(e=$(t)).data("filter")||e.find("._filterable").data("filter")},n=function(t){var e;return e=$(t).closest("._filtering").data("filter-selector"),r(e||this)},$("body").on("click","._filter-category-select",function(t){var e,i;return t.preventDefault(),i=r(this),e=$(this).data("category"),i.activate(e),i.updateIfPresent(e)}),t="._filter-input input:not(.simple-text), ._filter-input select, ._filter-sort",$("body").on("change",t,function(){if(!o(this))return r(this).update()}),e=null,$("body").on("keyup","._filter-input input.simple-text",function(){var t;return clearTimeout(e),t=r(this),e=setTimeout(function(){return t.updateIfChanged()},333)}),$("body").on("click","._delete-filter-input",function(){var t;return(t=r(this)).removeField($(this).closest("._filter-input").data("category")),t.update()}),$("body").on("click","._reset-filter",function(){var t;return(t=r(this)).reset(),t.update()}),$("body").on("click","._filtering ._filterable",function(t){var e;return(e=n(this)).widget.length&&e.restrict(i(this)),t.preventDefault(),t.stopPropagation()}),$("body").on("click","._filter-link",function(t){var e,i,n;return e=r(this),i=(n=$(this)).data("filter"),a(n)?e.removeRestrictions(i):e.addRestrictions(i),t.preventDefault(),t.stopPropagation()}),a=function(t){return!t.hasClass("active")&&0<t.closest(".quick-filter").length}})}).call(this);
// filter_items.js.coffee
(function(){var r,n,c,i,o,l,e,d,t,s,u,f,a,h,_,b,k;$(window).ready(function(){return $("body").on("click","._filter-items ._add-selected",function(){var t,e;return t=$(this),e=l(t),t.attr("href",n(t,e))}),$("body").on("click","._select-all",function(){return o($(this)).find("._unselected input._checkbox-list-checkbox").each(function(){return t($(this))}),$(this).prop("checked",!1),h($(this))}),$("body").on("click","._deselect-all",function(){return o($(this)).find("._selected input._checkbox-list-checkbox").each(function(){return $(this).slot().remove()}),$(this).prop("checked",!0),h($(this))}),$("body").on("click","._filter-items ._unselected input._checkbox-list-checkbox",function(){return t($(this)),h($(this))}),$("body").on("click","._filter-items ._selected input._checkbox-list-checkbox",function(){var t;return t=s($(this)),$(this).slot().remove(),h(t)}),$("body").on("click","._filtered-list-item-delete",function(){return $(this).closest("li").remove()})}),l=function(t){return $.map(d(t).concat(f(t)),function(t){return"~"+t}).join("\n")},n=function(t,e){var n,i;return i={assign:!0,view:t.slot().data("slot").view,card:{content:e,type:"Pointer"}},n=t.attr("href")+"&"+$.param(i),decko.slotPath(n,t.slot())},h=function(t){return a(t),new decko.filter(o(t).find("._filter-widget")).update(),_(t),k(t)},_=function(t){var e;return e=s(t).children().length,o(t).find("._selected-items").html(e),i(t).attr("disabled",0===e),0<e?r(t).removeClass("disabled"):r(t).addClass("disabled"),b(t,0<e)},b=function(t,e){var n,i,r;return r=(n=o(t)).find("._selected-item-list"),i=n.find("._filter-help"),e?(r.show(),i.hide()):(r.hide(),i.show())},k=function(t){var e,n;return n=(e=o(t)).find("._search-checkbox-list").children().length,e.find("._unselected-items").html(n),e.find("._select-all").attr("disabled",0<n)},t=function(t){return t.prop("checked",!0),s(t).append(t.slot())},s=function(t){return o(t).find("._selected-bin")},o=function(t){return t.closest("._filter-items")},r=function(t){return o(t).find("._add-selected")},i=function(t){return o(t).find("._deselect-all")},f=function(t){return u(t,"cardId")},d=function(t){return e(t,"cardId")},e=function(t,e){var n,i;return i=(n=r(t)).data("itemSelector"),c(n.slot().find(i),e)},u=function(t,e){return c(s(t).children(),e)},c=function(t,e){return t.map(function(){return $(this).data(e)}).toArray()},a=function(t){var e;return e=d(t).concat(f(t)),o(t).find("._not-ids").val(e.toString())}}).call(this);
// selectable_filtered_content.js.coffee
(function(){$(window).ready(function(){return $("body").on("click","._selectable-filtered-content .bar-body",function(t){var e,a,n;return n=(a=$(this)).slot().data("card-name"),e=a.closest("._selectable-filtered-content"),$(e.data("input-selector")).val(n),a.closest(".modal").modal("hide"),t.preventDefault(),t.stopPropagation()})})}).call(this);