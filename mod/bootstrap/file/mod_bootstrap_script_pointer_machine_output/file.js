// script_pointer_config.js.coffee
(function(){var t,e;$.extend(decko.editorContentFunctionMap,{"select.pointer-select":function(){return e(this.val())},"select.pointer-multiselect":function(){return e(this.val())},".pointer-radio-list":function(){return e(this.find("input:checked").val())},".pointer-list-ul":function(){return e(this.find("input").map(function(){return $(this).val()}))},".pointer-link-list-ul":function(){return decko.linkListContent(this.find(".input-group"))},"._nest-list-ul":function(){return decko.nestListContent(this.find(".input-group"))},".pointer-checkbox-list":function(){return e(this.find("input:checked").map(function(){return $(this).val()}))},".pointer-select-list":function(){return e(this.find(".pointer-select select").map(function(){return $(this).val()}))},"._pointer-filtered-list":function(){return e(this.find("._filtered-list-item").map(function(){return $(this).data("cardName")}))},"._pointer-list":function(){return e(this.find("._pointer-item").map(function(){return $(this).val()}))},".perm-editor":function(){return t(this)}}),decko.editorInitFunctionMap[".pointer-list-editor"]=function(){return this.sortable({handle:".handle",cancel:""}),decko.initPointerList(this.find("input"))},decko.editorInitFunctionMap["._pointer-filtered-list"]=function(){return this.sortable({handle:"._handle",cancel:""})},$.extend(decko,{initPointerList:function(t){return decko.initAutoCardPlete(t)},initAutoCardPlete:function(t){var n,i;if(n=t.data("options-card"))return i=n+".json?view=name_match",t.autocomplete({source:decko.slotPath(i)})},pointerContent:function(t){var n;return n=$.map($.makeArray(t),function(t){if(t)return"[["+t+"]]"}),$.makeArray(n).join("\n")},linkListContent:function(t){var n,i;return i=t.map(function(){var t,n;return n=$(this).find("input._reference").val(),0<(t=$(this).find("input._title").val()).length&&(n+="|"+t),n}),n=$.map($.makeArray(i),function(t){if(t)return"[["+t+"]]"}),$.makeArray(n).join("\n")},nestListContent:function(t){var n,i;return i=t.map(function(){var t,n;return n=$(this).find("input._reference").val(),0<(t=$(this).find("input._nest-options").val()).length&&(n+="|"+t),n}),n=$.map($.makeArray(i),function(t){if(t)return"{{"+t+"}}"}),$.makeArray(n).join("\n")}}),e=function(t){return decko.pointerContent(t)},t=function(t){var n,i;return t.find("#inherit").is(":checked")?"_left":(n=t.find(".perm-group input:checked").map(function(){return $(this).val()}),i=t.find(".perm-indiv input").map(function(){return $(this).val()}),e($.makeArray(n).concat($.makeArray(i))))}}).call(this);
// script_pointer_list_editor.js.coffee
(function(){$(window).ready(function(){return $("body").on("click","._pointer-item-add",function(t){return decko.addPointerItem(this),t.preventDefault()}),$("body").on("keydown",".pointer-item-text",function(t){if("Enter"===t.key)return decko.addPointerItem(this),t.preventDefault()}),$("body").on("keyup",".pointer-item-text",function(){return decko.updateAddItemButton(this)}),$("body").on("click",".pointer-item-delete",function(){var t,e;return 1<(e=(t=$(this).closest("li")).closest("ul")).find(".pointer-li").length?t.remove():t.find("input").val(""),decko.updateAddItemButton(e)})}),decko.slotReady(function(t){return t.find(".pointer-list-editor").each(function(){return decko.updateAddItemButton(this)})}),$.extend(decko,{addPointerItem:function(t){var e,n;return(n=$(t).slot()).trigger("slotDestroy"),(e=decko.nextPointerInput(decko.lastPointerItem(t))).val(""),n.trigger("slotReady"),decko.initializeEditors(n),e.first().focus(),decko.updateAddItemButton(t),decko.initPointerList(e)},nextPointerInput:function(t){var e,n,i,o,d,r;for(e=!0,n=0,d=(o=t.find("input")).length;n<d;n++)i=o[n],e=e&&""===$(i).val();return e?o:(r=t.clone(),t.after(r),r.attr("data-index",parseInt(t.attr("data-index")+1)),r.find("input"))},lastPointerItem:function(t){return $(t).closest(".content-editor").find(".pointer-li:last")},updateAddItemButton:function(t){var e,n;return e=$(t).closest(".content-editor").find("._pointer-item-add"),n=""===decko.lastPointerItem(t).find("input").val(),e.prop("disabled",n)}})}).call(this);