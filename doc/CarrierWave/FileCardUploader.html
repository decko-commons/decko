<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: CarrierWave::FileCardUploader
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "CarrierWave::FileCardUploader";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../CarrierWave.html" title="CarrierWave (module)">CarrierWave</a></span></span>
     &raquo; 
    <span class="title">FileCardUploader</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: CarrierWave::FileCardUploader
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Uploader::Base</span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Uploader::Base</li>
          
            <li class="next">CarrierWave::FileCardUploader</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../Card/Env/Location.html" title="Card::Env::Location (module)">Card::Env::Location</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html" title="CarrierWave::FileCardUploader::Path (module)">Path</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>mod/carrierwave/lib/carrier_wave/file_card_uploader.rb<span class="defines">,<br />
  mod/carrierwave/lib/carrier_wave/file_card_uploader/path.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Takes care of the file upload for cards with attached files.
Most of the upload behaviour depends on the card itself.
(e.g. card type and storage option chosen for the card). So in contrary
to CarrierWave’s default uploader we depend very much on the model
(= card object) to get the correct paths for retrieving and storing
the file.</p>

<p>Cards that support attachments (by default those are cards of type “file”
and “image”) accept a file handle as a card attribute.</p>

<p>It’s possible to upload files using a url. The card attribute for that is
remote_<attachment_type>_url</attachment_type></p>

<h2 id="storage-types">Storage types</h2>
<p>You can choose between four different storage options
 - coded: These files are in the codebase, like the default logo.
     Every view is a decko request.
 - local: Uploaded files which are stored in a local upload directory
     (upload path is configurable via config.paths[“files”]).
     If read permissions are set such that “Anyone” can read, then there is
     a symlink from the public directory.  Otherwise every view is a decko
     request.
 - cloud: You can configure buckets that refer to an external storage
     service. Link is rendered as absolute url
 - web: A fixed url (to external source). No upload or other file
     processing. Link is just the saved url.</p>

<p>Currently, there is no web interface that let’s a user or administrator
choose a storage option for a specific card or set of cards.
There is only a global config option to set the storage type for all new
uploads (config.storage_type). On the *admin card it’s possible to
update all existing file cards according to the current global config.</p>

<p>Storage types for single cards can be changed by developers using
the card attributes “storage_type”, “bucket”, and “mod”.</p>

<p>Depending on the storage type the uploader uses the following paths
and identifiers.
### Identifier (stored in the database as db_content)
 - coded: :codename/mod_name.ext
 - local: ~card_id/action_id.ext
 - cloud: (bucket)/card_id/action_id.ext
 - web: http://url</p>

<h3 id="storage-path">Storage path</h3>
<ul>
  <li>coded:
mod_dir/file/codename/type_code(-variant).ext  (no colon on codename!)</li>
  <li>local:
files_dir/card_id/action_id(-variant).ext           (no tilde on id!)</li>
  <li>cloud:
bucket/bucket_subdir/id/action_id(-variant).ext</li>
  <li>web: no storage</li>
</ul>

<p>Variants are only used for images. Possible options are
icon|small|medium|large|original.
files_dir, bucket, and bucket_subdir can be changed via config options.</p>

<h3 id="supported-url-patterns">Supported url patterns</h3>
<p>mark.ext
mark/revision.ext
mark/revision-variant.ext
/files/mark/revision-variant.ext  # &lt;- public symlink if readable by
                                  #    “Anyone”</p>

<p><mark> can be one of the following options
- <card name="">
- ~<card>
- :<code name=""></code></card></card></mark></p>

<revision> is the mod name if the file is coded or and action_id in any
case

Examples:
*logo.png
~22/33-medium.png               # local
:yeti_skin/standard-large.png   # coded
</revision>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Attaching a file to a file card</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../Card.html" title="Card (class)">Card</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'><span class='object_link'><a href="../Card/Director/CardClass.html#create-instance_method" title="Card::Director::CardClass#create (method)">create</a></span></span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file card</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='symbol'>:file</span><span class='comma'>,</span>
            <span class='label'>file:</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path_to_file'>path_to_file</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Attaching a image to a image card</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../Card.html" title="Card (class)">Card</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'><span class='object_link'><a href="../Card/Director/CardClass.html#create-instance_method" title="Card::Director::CardClass#create (method)">create</a></span></span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file card</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='symbol'>:image</span><span class='comma'>,</span>
            <span class='label'>image:</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path_to_image'>path_to_image</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Create a file card using a remote url</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../Card.html" title="Card (class)">Card</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'><span class='object_link'><a href="../Card/Director/CardClass.html#create-instance_method" title="Card::Director::CardClass#create (method)">create</a></span></span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file_card</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='symbol'>:file</span><span class='comma'>,</span>
            <span class='label'>remote_file_url:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://a.file.in/the.web</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Updating a image card using a remote url</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_card'>card</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span> <span class='label'>remote_image_url:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://a.image/somewhere.png</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Creating a hard-coded file</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../Card.html" title="Card (class)">Card</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'><span class='object_link'><a href="../Card/Director/CardClass.html#create-instance_method" title="Card::Director::CardClass#create (method)">create</a></span></span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file card</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>type_id:</span> <span class='const'><span class='object_link'><a href="../Card.html" title="Card (class)">Card</a></span></span><span class='op'>::</span><span class='const'>FileID</span><span class='comma'>,</span>
            <span class='label'>file:</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='label'>storage_type:</span> <span class='symbol'>:coded</span><span class='comma'>,</span> <span class='label'>mod:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>account</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Moving a file to a cloud service</p>
</div></p>
      
      <pre class="example code"><code># my_deck/config/application.rb:
config.file_buckets = {
  aws_bucket: {
    provider: &quot;fog/aws&quot;,
    directory: &quot;bucket-name&quot;,
    subdirectory: &quot;files&quot;,
    credentials: {
       provider: &#39;AWS&#39;                         # required
       aws_access_key_id: &#39;key&#39;                # required
       aws_secret_access_key: &#39;secret-key&#39;     # required
    public: true,
   }
}

# decko console or rake task:
card.update storage_type: :cloud, bucket: :aws_bucket</code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Creating a file card with fixed external link</p>
</div></p>
      
      <pre class="example code"><code>Card.create name: &quot;file card&quot;, type_id: Card::FileID,
            content: &quot;http://animals.org/cat.png&quot;
            storage_type: :web

Card.create name: &quot;file card&quot;, type_id: Card::FileID,
            file: &quot;http://animals.org/cat.png&quot;
            storage_type: :web</code></pre>
    
  </div>


</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="ImageCardUploader.html" title="CarrierWave::ImageCardUploader (class)">ImageCardUploader</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="FileCardUploader/Path.html" title="CarrierWave::FileCardUploader::Path (module)">Path</a></span>
    
  
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="STORAGE_TYPES-constant" class="">STORAGE_TYPES =
          
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>cloud</span><span class='words_sep'> </span><span class='tstring_content'>web</span><span class='words_sep'> </span><span class='tstring_content'>coded</span><span class='words_sep'> </span><span class='tstring_content'>local</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="CONFIG_OPTIONS-constant" class="">CONFIG_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>provider</span><span class='words_sep'> </span><span class='tstring_content'>attributes</span><span class='words_sep'> </span><span class='tstring_content'>directory</span><span class='words_sep'> </span><span class='tstring_content'>public</span><span class='words_sep'> </span><span class='tstring_content'>credentials</span><span class='words_sep'>
</span><span class='tstring_content'>authenticated_url_expiration</span><span class='words_sep'> </span><span class='tstring_content'>use_ssl_for_aws</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="CONFIG_CREDENTIAL_OPTIONS-constant" class="">CONFIG_CREDENTIAL_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[</span><span class='words_sep'>
  </span><span class='tstring_content'>provider</span><span class='words_sep'>
  </span><span class='tstring_content'>aws_access_key_id</span><span class='words_sep'> </span><span class='tstring_content'>aws_secret_access_key</span><span class='words_sep'> </span><span class='tstring_content'>region</span><span class='words_sep'> </span><span class='tstring_content'>host</span><span class='words_sep'> </span><span class='tstring_content'>endpoint</span><span class='words_sep'>
  </span><span class='tstring_content'>google_access_key_id</span><span class='words_sep'> </span><span class='tstring_content'>google_secret_access_key</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#mod-instance_method" title="#mod (instance method)">#<strong>mod</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute mod.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#action_id-instance_method" title="#action_id (instance method)">#<strong>action_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#asset_host-instance_method" title="#asset_host (instance method)">#<strong>asset_host</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bucket_config-instance_method" title="#bucket_config (instance method)">#<strong>bucket_config</strong>(option)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_versions%3F-instance_method" title="#create_versions? (instance method)">#<strong>create_versions?</strong>(new_file)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#db_content-instance_method" title="#db_content (instance method)">#<strong>db_content</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extension-instance_method" title="#extension (instance method)">#<strong>extension</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#filename-instance_method" title="#filename (instance method)">#<strong>filename</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#original_filename-instance_method" title="#original_filename (instance method)">#<strong>original_filename</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#url-instance_method" title="#url (instance method)">#<strong>url</strong>(opts = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#url_filename-instance_method" title="#url_filename (instance method)">#<strong>url_filename</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid%3F-instance_method" title="#valid? (instance method)">#<strong>valid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="FileCardUploader/Path.html" title="CarrierWave::FileCardUploader::Path (module)">Path</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="FileCardUploader/Path.html#cache_dir-instance_method" title="CarrierWave::FileCardUploader::Path#cache_dir (method)">#cache_dir</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html#local_url-instance_method" title="CarrierWave::FileCardUploader::Path#local_url (method)">#local_url</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html#local_url_base-instance_method" title="CarrierWave::FileCardUploader::Path#local_url_base (method)">#local_url_base</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html#path-instance_method" title="CarrierWave::FileCardUploader::Path#path (method)">#path</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html#public_path-instance_method" title="CarrierWave::FileCardUploader::Path#public_path (method)">#public_path</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html#retrieve_path-instance_method" title="CarrierWave::FileCardUploader::Path#retrieve_path (method)">#retrieve_path</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html#store_path-instance_method" title="CarrierWave::FileCardUploader::Path#store_path (method)">#store_path</a></span>, <span class='object_link'><a href="FileCardUploader/Path.html#tmp_path-instance_method" title="CarrierWave::FileCardUploader::Path#tmp_path (method)">#tmp_path</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Card/Env/Location.html" title="Card::Env::Location (module)">Card::Env::Location</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Card/Env/Location.html#card_path-instance_method" title="Card::Env::Location#card_path (method)">#card_path</a></span>, <span class='object_link'><a href="../Card/Env/Location.html#card_url-instance_method" title="Card::Env::Location#card_url (method)">#card_url</a></span>, <span class='object_link'><a href="../Card/Env/Location.html#cardname_from_url-instance_method" title="Card::Env::Location#cardname_from_url (method)">#cardname_from_url</a></span>, <span class='object_link'><a href="../Card/Env/Location.html#relative_url_root-instance_method" title="Card::Env::Location#relative_url_root (method)">#relative_url_root</a></span></p>

  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="mod=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="mod-instance_method">
  
    #<strong>mod</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute mod.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mod'>mod</span>
  <span class='ivar'>@mod</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="action_id-instance_method">
  
    #<strong>action_id</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 197</span>

<span class='kw'>def</span> <span class='id identifier rubyid_action_id'>action_id</span>
  <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_selected_content_action_id'>selected_content_action_id</span> <span class='op'>||</span>
    <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_last_content_action_id'>last_content_action_id</span> <span class='op'>||</span>
    <span class='id identifier rubyid_action_id_stand_in'>action_id_stand_in</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="asset_host-instance_method">
  
    #<strong>asset_host</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_asset_host'>asset_host</span>
  <span class='id identifier rubyid_bucket_config'>bucket_config</span><span class='lparen'>(</span><span class='symbol'>:asset_host</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bucket_config-instance_method">
  
    #<strong>bucket_config</strong>(option)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 208</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bucket_config'>bucket_config</span> <span class='id identifier rubyid_option'>option</span>
  <span class='ivar'>@model</span><span class='period'>.</span><span class='id identifier rubyid_bucket_config'>bucket_config</span><span class='lbracket'>[</span><span class='id identifier rubyid_option'>option</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_versions?-instance_method">
  
    #<strong>create_versions?</strong>(new_file)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 189</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_versions?'>create_versions?</span> <span class='id identifier rubyid_new_file'>new_file</span>
  <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_create_versions?'>create_versions?</span> <span class='id identifier rubyid_new_file'>new_file</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="db_content-instance_method">
  
    #<strong>db_content</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_db_content'>db_content</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span> <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_web?'>web?</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s/%s</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_file_dir'>file_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_url_filename'>url_filename</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="extension-instance_method">
  
    #<strong>extension</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 154</span>

<span class='kw'>def</span> <span class='id identifier rubyid_extension'>extension</span>
  <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_file'>file</span><span class='op'>&amp;.</span><span class='id identifier rubyid_extension'>extension</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>     <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_extension'>extension</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='id identifier rubyid_card_content'>card_content</span> <span class='op'>=</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span> <span class='kw'>then</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_extname'>extname</span><span class='lparen'>(</span><span class='id identifier rubyid_card_content'>card_content</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_orig'>orig</span> <span class='op'>=</span> <span class='id identifier rubyid_original_filename'>original_filename</span>     <span class='kw'>then</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_extname'>extname</span><span class='lparen'>(</span><span class='id identifier rubyid_orig'>orig</span><span class='rparen'>)</span>
  <span class='kw'>else</span>                              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="filename-instance_method">
  
    #<strong>filename</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 146</span>

<span class='kw'>def</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_coded?'>coded?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_attachment_name'>attachment_name</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extension'>extension</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_action_id'>action_id</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extension'>extension</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="original_filename-instance_method">
  
    #<strong>original_filename</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_original_filename'>original_filename</span>
  <span class='ivar'>@original_filename</span> <span class='op'>||=</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_selected_action'>selected_action</span><span class='op'>&amp;.</span><span class='id identifier rubyid_comment'>comment</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="url-instance_method">
  
    #<strong>url</strong>(opts = {})  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:absolute</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><ul>
  <li>return absolute url</li>
</ul>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181
182
183
184
185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_url'>url</span> <span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_cloud?'>cloud?</span>
    <span class='id identifier rubyid_file'>file</span><span class='op'>&amp;.</span><span class='id identifier rubyid_url'>url</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_web?'>web?</span>
    <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_local_url'>local_url</span> <span class='id identifier rubyid_opts'>opts</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="url_filename-instance_method">
  
    #<strong>url_filename</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_url_filename'>url_filename</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_coded?'>coded?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_mod'>mod</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extension'>extension</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_action_id'>action_id</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extension'>extension</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid?-instance_method">
  
    #<strong>valid?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mod/carrierwave/lib/carrier_wave/file_card_uploader.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_valid?'>valid?</span>
  <span class='id identifier rubyid_extension'>extension</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Feb  9 10:07:54 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.0.1).
</div>

    </div>
  </body>
</html>