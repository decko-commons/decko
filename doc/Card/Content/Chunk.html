<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Card::Content::Chunk
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Card::Content::Chunk";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Card.html" title="Card (class)">Card</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Content.html" title="Card::Content (class)">Content</a></span></span>
     &raquo; 
    <span class="title">Chunk</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Card::Content::Chunk
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>card/lib/card/content/chunk.rb<span class="defines">,<br />
  card/lib/card/content/chunk/abstract.rb,<br /> card/mod/core/chunk/uri.rb,<br /> card/mod/core/chunk/link.rb,<br /> card/mod/core/chunk/nest.rb,<br /> card/mod/core/chunk/reference.rb,<br /> card/mod/core/chunk/view_stub.rb,<br /> card/mod/core/chunk/escaped_literal.rb,<br /> card/mod/core/chunk/query_reference.rb,<br /> card/mod/core/chunk/keep_escaped_literal.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This wiki chunk matches arbitrary URIs, using patterns from the Ruby URI
modules.
It parses out a variety of fields that could be used by formats to format
the links in various ways (shortening domain names, hiding email addresses)
It matches email addresses and host.com.au domains without schemes (http://)
but adds these on as required.</p>

<p>The heuristic used to match a URI is designed to err on the side of caution.
That is, it is more likely to not autolink a URI than it is to accidently
autolink something that is not a URI. The reason behind this is it is easier
to force a URI link by prefixing ‘http://’ to it than it is to escape and
incorrectly marked up non-URI.</p>

<p>I’m using a part of the [ISO 3166-1 Standard][iso3166] for country name
suffixes.
The generic names are from www.bnoack.com/data/countrycode2.html)
  [iso3166]: http://geotags.com/iso3166/</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Chunk/Abstract.html" title="Card::Content::Chunk::Abstract (class)">Abstract</a></span>, <span class='object_link'><a href="Chunk/EmailURI.html" title="Card::Content::Chunk::EmailURI (class)">EmailURI</a></span>, <span class='object_link'><a href="Chunk/EscapedLiteral.html" title="Card::Content::Chunk::EscapedLiteral (class)">EscapedLiteral</a></span>, <span class='object_link'><a href="Chunk/HostURI.html" title="Card::Content::Chunk::HostURI (class)">HostURI</a></span>, <span class='object_link'><a href="Chunk/KeepEscapedLiteral.html" title="Card::Content::Chunk::KeepEscapedLiteral (class)">KeepEscapedLiteral</a></span>, <span class='object_link'><a href="Chunk/Link.html" title="Card::Content::Chunk::Link (class)">Link</a></span>, <span class='object_link'><a href="Chunk/Nest.html" title="Card::Content::Chunk::Nest (class)">Nest</a></span>, <span class='object_link'><a href="Chunk/QueryReference.html" title="Card::Content::Chunk::QueryReference (class)">QueryReference</a></span>, <span class='object_link'><a href="Chunk/Reference.html" title="Card::Content::Chunk::Reference (class)">Reference</a></span>, <span class='object_link'><a href="Chunk/URI.html" title="Card::Content::Chunk::URI (class)">URI</a></span>, <span class='object_link'><a href="Chunk/ViewStub.html" title="Card::Content::Chunk::ViewStub (class)">ViewStub</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="raw_list-classvariable" class="">@@raw_list =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="prefix_regexp_by_list-classvariable" class="">@@prefix_regexp_by_list =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="prefix_map_by_chunkname-classvariable" class="">@@prefix_map_by_chunkname =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="prefix_map_by_list-classvariable" class="">@@prefix_map_by_list =
          
        </dt>
        <dd><pre class="code"><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='rbrace'>}</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_prefix_regexp-class_method" title="build_prefix_regexp (class method)">.<strong>build_prefix_regexp</strong>(chunk_list_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_class_by_prefix-class_method" title="find_class_by_prefix (class method)">.<strong>find_class_by_prefix</strong>(prefix, chunk_list_key = :default)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefix_regexp-class_method" title="prefix_regexp (class method)">.<strong>prefix_regexp</strong>(chunk_list_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_class-class_method" title="register_class (class method)">.<strong>register_class</strong>(klass, hash)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_list-class_method" title="register_list (class method)">.<strong>register_list</strong>(key, list)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_chunk_list_key-class_method" title="validate_chunk_list_key (class method)">.<strong>validate_chunk_list_key</strong>(chunk_list_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="build_prefix_regexp-class_method">
  
    .<strong>build_prefix_regexp</strong>(chunk_list_key)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70
71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/content/chunk.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_prefix_regexp'>build_prefix_regexp</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span>
  <span class='id identifier rubyid_validate_chunk_list_key'>validate_chunk_list_key</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span>

  <span class='id identifier rubyid_prefix_res'>prefix_res</span> <span class='op'>=</span>
    <span class='id identifier rubyid_raw_list'>raw_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_chunkname'>chunkname</span><span class='op'>|</span>
      <span class='id identifier rubyid_chunk_class'>chunk_class</span> <span class='op'>=</span> <span class='id identifier rubyid_const_get'>const_get</span> <span class='id identifier rubyid_chunkname'>chunkname</span>
      <span class='id identifier rubyid_chunk_class'>chunk_class</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:prefix_re</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?:</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_prefix_res'>prefix_res</span> <span class='op'>*</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>|</span><span class='tstring_end'>&#39;</span></span> <span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='regexp_end'>/m</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_class_by_prefix-class_method">
  
    .<strong>find_class_by_prefix</strong>(prefix, chunk_list_key = :default)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/content/chunk.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_class_by_prefix'>find_class_by_prefix</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span><span class='op'>=</span><span class='symbol'>:default</span>
  <span class='id identifier rubyid_validate_chunk_list_key'>validate_chunk_list_key</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span>

  <span class='id identifier rubyid_prefix_map'>prefix_map</span> <span class='op'>=</span> <span class='id identifier rubyid_prefix_map_by_list'>prefix_map_by_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='id identifier rubyid_prefix_map'>prefix_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_prefix'>prefix</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span>
           <span class='id identifier rubyid_prefix_map'>prefix_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_prefix'>prefix</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span>
           <span class='id identifier rubyid_prefix_map'>prefix_map</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span>
  <span class='comment'># prefix identified by first character, last character, or default.
</span>  <span class='comment'># a little ugly...
</span>
  <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:class</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prefix_regexp-class_method">
  
    .<strong>prefix_regexp</strong>(chunk_list_key)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/content/chunk.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prefix_regexp'>prefix_regexp</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span>
  <span class='id identifier rubyid_prefix_regexp_by_list'>prefix_regexp_by_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span><span class='rbracket'>]</span> <span class='op'>||=</span>
    <span class='id identifier rubyid_build_prefix_regexp'>build_prefix_regexp</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_class-class_method">
  
    .<strong>register_class</strong>(klass, hash)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/content/chunk.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_class'>register_class</span> <span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_hash'>hash</span>
  <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span> <span class='label'>class:</span> <span class='id identifier rubyid_klass'>klass</span>
  <span class='id identifier rubyid_prefix_index'>prefix_index</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:idx_char</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:default</span>
  <span class='comment'># ^ this is gross and needs to be moved out.
</span>
  <span class='id identifier rubyid_klassname'>klassname</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>::</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_prefix_map_by_chunkname'>prefix_map_by_chunkname</span><span class='lbracket'>[</span><span class='id identifier rubyid_klassname'>klassname</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_prefix_index'>prefix_index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_raw_list'>raw_list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_klassname'>klassname</span>

    <span class='id identifier rubyid_prefix_map_by_list'>prefix_map_by_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span> <span class='id identifier rubyid_prefix_map_by_chunkname'>prefix_map_by_chunkname</span><span class='lbracket'>[</span><span class='id identifier rubyid_klassname'>klassname</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_list-class_method">
  
    .<strong>register_list</strong>(key, list)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/content/chunk.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_list'>register_list</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span>
  <span class='id identifier rubyid_raw_list'>raw_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_list'>list</span>
  <span class='id identifier rubyid_prefix_map_by_list'>prefix_map_by_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span>
    <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_chunkname'>chunkname</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_p_map'>p_map</span> <span class='op'>=</span> <span class='id identifier rubyid_prefix_map_by_chunkname'>prefix_map_by_chunkname</span><span class='lbracket'>[</span><span class='id identifier rubyid_chunkname'>chunkname</span><span class='rbracket'>]</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span> <span class='id identifier rubyid_p_map'>p_map</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_chunk_list_key-class_method">
  
    .<strong>validate_chunk_list_key</strong>(chunk_list_key)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/content/chunk.rb', line 75</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_chunk_list_key'>validate_chunk_list_key</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_raw_list'>raw_list</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span> <span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid chunk list key: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_chunk_list_key'>chunk_list_key</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Oct 18 23:47:42 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.6.3).
</div>

    </div>
  </body>
</html>