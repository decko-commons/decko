<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Card::Reference::All
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Card::Reference::All";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Card.html" title="Card (class)">Card</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Reference.html" title="Card::Reference (class)">Reference</a></span></span>
     &raquo; 
    <span class="title">All</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Card::Reference::All
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="../../Card.html" title="Card (class)">Card</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>card/lib/card/reference/all.rb</dd>
  </dl>
  
</div>


  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="PARTIAL_REF_CODE-constant" class="">PARTIAL_REF_CODE =
          <div class="docstring">
  <div class="discussion">
    <p>Cards can refer to other cards in their content, eg via links and nests.
The card that refers is the “referer”, the card that is referred to is
the “referee”. The reference itself has its own class (Card::Reference),
which handles id-based reference tracking.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>P</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_references_out-instance_method" title="#create_references_out (instance method)">#<strong>create_references_out</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>interpret references from this card’s content and insert entries in reference table.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name_referers-instance_method" title="#name_referers (instance method)">#<strong>name_referers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>cards that refer to self by name (finds cards not yet linked by id).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nestees-instance_method" title="#nestees (instance method)">#<strong>nestees</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>cards that self includes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nesters-instance_method" title="#nesters (instance method)">#<strong>nesters</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>cards that include self.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#referees-instance_method" title="#referees (instance method)">#<strong>referees</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>cards that self refers to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#referees_from_references-instance_method" title="#referees_from_references (instance method)">#<strong>referees_from_references</strong>(references)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#referer_cards_from_references-instance_method" title="#referer_cards_from_references (instance method)">#<strong>referer_cards_from_references</strong>(references)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#referers-instance_method" title="#referers (instance method)">#<strong>referers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>cards that refer to self.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#swap_names-instance_method" title="#swap_names (instance method)">#<strong>swap_names</strong>(old_name, new_name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>replace references in card content.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_references_out-instance_method" title="#update_references_out (instance method)">#<strong>update_references_out</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>delete old references from this card’s content, create new ones.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_references_out-instance_method">
  
    #<strong>create_references_out</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>interpret references from this card’s content and
insert entries in reference table</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_references_out'>create_references_out</span>
  <span class='id identifier rubyid_ref_hash'>ref_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_each_reference_out'>each_reference_out</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_referee_name'>referee_name</span><span class='comma'>,</span> <span class='id identifier rubyid_ref_type'>ref_type</span><span class='op'>|</span>
    <span class='id identifier rubyid_interpret_reference'>interpret_reference</span> <span class='id identifier rubyid_ref_hash'>ref_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_referee_name'>referee_name</span><span class='comma'>,</span> <span class='id identifier rubyid_ref_type'>ref_type</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_ref_hash'>ref_hash</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='const'><span class='object_link'><a href="../Reference.html" title="Card::Reference (class)">Reference</a></span></span><span class='period'>.</span><span class='id identifier rubyid_mass_insert'><span class='object_link'><a href="../Reference.html#mass_insert-class_method" title="Card::Reference.mass_insert (method)">mass_insert</a></span></span> <span class='id identifier rubyid_reference_values_array'>reference_values_array</span><span class='lparen'>(</span><span class='id identifier rubyid_ref_hash'>ref_hash</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name_referers-instance_method">
  
    #<strong>name_referers</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>cards that refer to self by name
(finds cards not yet linked by id)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name_referers'>name_referers</span>
  <span class='const'><span class='object_link'><a href="../../Card.html" title="Card (class)">Card</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:references_out</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span> <span class='label'>card_references:</span> <span class='lbrace'>{</span> <span class='label'>referee_key:</span> <span class='id identifier rubyid_key'>key</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nestees-instance_method">
  
    #<strong>nestees</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>cards that self includes</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nestees'>nestees</span>
  <span class='id identifier rubyid_referees_from_references'>referees_from_references</span> <span class='id identifier rubyid_references_out'>references_out</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>ref_type:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>I</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nesters-instance_method">
  
    #<strong>nesters</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>cards that include self</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 19</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nesters'>nesters</span>
  <span class='id identifier rubyid_referer_cards_from_references'>referer_cards_from_references</span> <span class='id identifier rubyid_references_in'>references_in</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>ref_type:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>I</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="referees-instance_method">
  
    #<strong>referees</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>cards that self refers to</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_referees'>referees</span>
  <span class='id identifier rubyid_referees_from_references'>referees_from_references</span> <span class='id identifier rubyid_references_out'>references_out</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="referees_from_references-instance_method">
  
    #<strong>referees_from_references</strong>(references)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_referees_from_references'>referees_from_references</span> <span class='id identifier rubyid_references'>references</span>
  <span class='id identifier rubyid_references'>references</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:referee_key</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="../../Card.html" title="Card (class)">Card</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'><span class='object_link'><a href="../Fetch/CardClass.html#fetch-instance_method" title="Card::Fetch::CardClass#fetch (method)">fetch</a></span></span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>new:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="referer_cards_from_references-instance_method">
  
    #<strong>referer_cards_from_references</strong>(references)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_referer_cards_from_references'>referer_cards_from_references</span> <span class='id identifier rubyid_references'>references</span>
  <span class='id identifier rubyid_references'>references</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:referer_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:card</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="referers-instance_method">
  
    #<strong>referers</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>cards that refer to self</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_referers'>referers</span>
  <span class='id identifier rubyid_referer_cards_from_references'>referer_cards_from_references</span> <span class='id identifier rubyid_references_in'>references_in</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="swap_names-instance_method">
  
    #<strong>swap_names</strong>(old_name, new_name)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>replace references in card content</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_swap_names'>swap_names</span> <span class='id identifier rubyid_old_name'>old_name</span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span>
  <span class='id identifier rubyid_cont'>cont</span> <span class='op'>=</span> <span class='id identifier rubyid_content_object'>content_object</span>
  <span class='id identifier rubyid_cont'>cont</span><span class='period'>.</span><span class='id identifier rubyid_find_chunks'>find_chunks</span><span class='lparen'>(</span><span class='symbol'>:Reference</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_chunk'>chunk</span><span class='op'>|</span>
    <span class='id identifier rubyid_chunk'>chunk</span><span class='period'>.</span><span class='id identifier rubyid_swap_name'>swap_name</span> <span class='id identifier rubyid_old_name'>old_name</span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_cont'>cont</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_references_out-instance_method">
  
    #<strong>update_references_out</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>delete old references from this card’s content, create new ones</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'card/lib/card/reference/all.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_references_out'>update_references_out</span>
  <span class='id identifier rubyid_delete_references_out'>delete_references_out</span>
  <span class='id identifier rubyid_create_references_out'>create_references_out</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb  6 14:14:56 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.0.1).
</div>

    </div>
  </body>
</html>